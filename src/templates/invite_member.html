{% extends "base.html" %}

{% block Styles %}
    <link href="/assets/css/registration.css" type="text/css" rel="stylesheet">
{% endblock %}

{% block Content %}
    <div class="row">
        <div class="col-lg-12">
            <h3 class="center-align">Enter member details and we will send him a mail</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="panel">
                {% include "components/registration_breadcrumbs.html" with idx="1" %}
                <div class="tab-content">
                    <div class="tab-pane fade active in">
                        <form class="top-padding-sm invite-member-form" role="form" action="{{invite_form_url}}" method="POST" onsubmit="return validate()">
                            {% include "components/form_input.html" with id="new_member_email" name="email" placeholder="Email" type="email" other="required" value=email %}
                            {% include "components/form_captcha.html" with captcha=captcha %}
                            {% include "components/form_error_message.html" with captcha=captcha %}
                            {% include "components/form_input.html" with name="company_id" type="hidden" value=company_id id=company_id %}
                            {% include "components/form_submit.html" with value="Invite" %}
                        </form>
                        <div class="row">
                            <div class="col-md-3">
                            </div>
                            <div class="col-md-6">
                                <input type="button" id="done" value="Done inviting!" onclick="return done_inviting();" class="btn btn-bootflat pull-right" style="margin-left:10px;">
                            </div>
                            <div class="col-md-3">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block Scripts %}
    <script type="text/javascript">
        function done_inviting(){
            window.location='/member/expose_third_party?company_id=' + {{company_id}};
            return false;
        }

        function validate() {
            $('.error-message').html("");
            $('.error-message').hide();
            if(!$('#recaptcha_response_field').val()) {
                $('.error-message').show();
                $('.error-message').html("Please enter captcha response");
                $('#recaptcha_response_field').focus();
                return false;
            }
            return true;
        }

        $(document).ready(function(){
            if("{{error}}") {
                $('.error-message').show();
                $('.error-message').html("{{error}}");
                $('#recaptcha_response_field').focus();
            }
            if("{{success}}") {
                alert("{{success}}");
            }
        });
    </script>
{% endblock %}